---
import format from 'date-fns/format';
import { tagTitleCase } from '../utilites';

const { title, date, blogTitle, blogUrl, tags, draft } = Astro.props;
const { url } = Astro.request;

const pathParts = url.pathname.split('/');

---

<article>
  <h1 class="mb-2">{title} {draft && '(DRAFT)'}</h1>
  <p class="mb-4">
    Published {format(new Date(date), 'MMMM d, yyyy')} in <a href={blogUrl}>{blogTitle}</a> by <a href="/">Brian Douglass</a>
    <br/>
    Filed under {tags.map((tag, index) => (
      <span class="tag">
        <a href={`/${pathParts[1]}/${pathParts[2]}/${tag}`}>{tagTitleCase(tag)}</a>{((index + 1) < tags.length) ? ',' : ''}
      </span>
    ))}
  </p>
  <slot />
</article>
